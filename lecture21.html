<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Async Weather Tracker </title>
</head>
<body>
    <h1>
        üå¶Ô∏è Async Weather Tracker
    </h1>
    <div id = "search-box">
        
        <div id="first-search">
            <h3>Search City</h3>
        <form action="">
            <input type="text" id = "search-city" placeholder="Delhi,Mumbai etc......">
            <button type="submit">Search</button>
        </form>
        </div>
        <div id = "search-history">
            <h3>Search History</h3>
            <div id="search-cities-box">

            </div>
        </div>
    </div>

    <div id="Weather-info-box">
        <h3>Weather Info</h3>
        <div id="fetched-data-box">

        </div>
    </div>

    <script>
        let API_KEY = "ea0beec1a1a15e6771b7ecdc73f830ec";
        let url = "https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric"
        let form = document.querySelector('form')
        let city = document.querySelector("#search-city")
        let weather = document.querySelector('#fetched-data-box')
        let searchcity = document.querySelector('#search-cities-box')


        async function getWeatherInfo(city){
            let response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`)
            
            let data = await response.json()
            console.log(data)

            let card = document.createElement('div')
             card.innerHTML = `<div>City : ${data.name} , ${data.sys.country} </div>
                        <div>Temp : ${data.main.temp}</div>
                        <div>Weather : ${data.weather[0].main}</div>
                        <div>Humidity : ${data.main.humidity}</div>
                        <div>Wind : ${data.wind.speed}</div>`
            weather.innerHTML = ""
            weather.append(card)

            localStorage.setItem("cities" , city)
        
        }
        
        searchcity.innerHTML = `<h4>${localStorage.getItem("cities").join}</h4>`


        form.addEventListener('submit' , (e)=>{
            e.preventDefault()
            getWeatherInfo(city.value)
        })
        

    </script>
</body>
</html>